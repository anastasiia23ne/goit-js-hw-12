{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/js/message.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '42598065-1779ad5a953180c3fe77c2809';\nconst API_URL = 'https://pixabay.com/api/';\n\nexport async function getImagesByQuery(query, page = 1, perPage = 15) {\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page,\n    per_page: perPage,\n  };\n\n  const response = await axios.get(API_URL, { params });\n  return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox;\n\nexport function createGallery(images) {\n  return images\n    .map(\n      ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n      <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n        </a>\n        <ul>\n          <li>Likes: ${likes}</li>\n          <li>Views: ${views}</li>\n          <li>Comments: ${comments}</li>\n          <li>Downloads: ${downloads}</li>\n        </ul>\n      </li>`\n    )\n    .join('');\n}\n\nexport function clearGallery(container) {\n  container.innerHTML = '';\n}\n\nexport function showLoader() {\n  document.querySelector('.loader').classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  document.querySelector('.loader').classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\n  document.querySelector('.load-more').classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n  document.querySelector('.load-more').classList.add('hidden');\n}\n\nexport function initializeLightbox() {\n  lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n}\n\nexport function refreshLightbox() {\n  lightbox.refresh();\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport const MESSAGES = {\n  info: 'Please enter a value in the search field!',\n  warning: 'Sorry, there are no images matching your search query. Please try again!',\n  error: 'Sorry, there is no connection to the server. Try again later!',\n  exception: 'Something went wrong. Please try again later!',\n  end: \"We're sorry, but you've reached the end of search results.\",\n};\n\nexport const MESSAGES_BG_COLORS = {\n  blue: '#abd4f8',\n  orange: '#f28111',\n  red: '#e97782',\n};\n\nexport function showInfoMessage(message, color) {\n  iziToast.info({\n    position: 'topRight',\n    backgroundColor: color,\n    message: message,\n  });\n}\n","import { getImagesByQuery } from './js/pixabay-api';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  initializeLightbox,\n  refreshLightbox,\n} from './js/render-functions';\nimport { MESSAGES, MESSAGES_BG_COLORS, showInfoMessage } from './js/message';\n\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\nconst PER_PAGE = 15;\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  hideLoadMoreButton();\n  clearGallery(gallery);\n  showLoader();\n   await new Promise(resolve => setTimeout(resolve, 50));\n\n  const formData = new FormData(form);\n  const searchQuery = formData.get('search').trim();\n\n  if (!searchQuery) {\n    hideLoader();\n    showInfoMessage(MESSAGES.info, MESSAGES_BG_COLORS.blue);\n    return;\n  }\n\n  currentQuery = searchQuery;\n  currentPage = 1;\n\n  try {\n    const data = await getImagesByQuery(currentQuery, currentPage, PER_PAGE);\n    totalHits = data.totalHits;\n\n    if (data.hits.length === 0) {\n      hideLoader();\n      showInfoMessage(MESSAGES.warning, MESSAGES_BG_COLORS.red);\n      return;\n    }\n\n    gallery.innerHTML = createGallery(data.hits);\n    initializeLightbox();\n\n   \n    if (currentPage < Math.ceil(totalHits / PER_PAGE)) {\n      showLoadMoreButton();\n    }\n  } catch (err) {\n    showInfoMessage(`${MESSAGES.exception} ${err}`, MESSAGES_BG_COLORS.orange);\n  } finally {\n    hideLoader();\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  currentPage += 1;\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(currentQuery, currentPage, PER_PAGE);\n    gallery.insertAdjacentHTML('beforeend', createGallery(data.hits));\n    refreshLightbox();\n\n    const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    if (currentPage >= Math.ceil(totalHits / PER_PAGE)) {\n      hideLoadMoreButton();\n      showInfoMessage(MESSAGES.end, MESSAGES_BG_COLORS.red);\n    }\n  } catch (err) {\n    showInfoMessage(`${MESSAGES.exception} ${err}`, MESSAGES_BG_COLORS.orange);\n  } finally {\n    hideLoader();\n  }\n});\n"],"names":["API_KEY","API_URL","getImagesByQuery","query","page","perPage","params","axios","lightbox","createGallery","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","container","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","initializeLightbox","SimpleLightbox","refreshLightbox","MESSAGES","MESSAGES_BG_COLORS","showInfoMessage","message","color","iziToast","form","gallery","loadMoreBtn","currentPage","currentQuery","totalHits","PER_PAGE","e","resolve","searchQuery","data","err","cardHeight"],"mappings":"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"}